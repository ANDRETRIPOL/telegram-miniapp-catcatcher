import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';

// –ü—Ä–∏–º–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –≤–∞–∫–∞–Ω—Å–∏—è—Ö
const jobsData = [
  {
    id: 1,
    title: "–í—É–∑–∫–æ–≤—ã–π (—Å–∫–ª–∞–¥ —á–∏–ø—Å–æ–≤)",
    salary: "27,00 zl netto/—á–∞—Å",
    totalSalary: "–æ—Ç 5 400 zl (200 —á–∞—Å–æ–≤) –¥–æ 6 480 zl (240 —á–∞—Å–æ–≤)",
    hours: "–†–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤ –≤ –º–µ—Å—è—Ü: 200-240",
    schedule: "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ ‚Äì –ü—è—Ç–Ω–∏—Ü–∞",
    forWomen: false,
    forCIS: true,
    fullDescription: `
      –í—É–∑–∫–æ–≤—ã–π (—Å–∫–ª–∞–¥ —á–∏–ø—Å–æ–≤) ‚Äì –†–∞–±–æ—Ç–∞ –≤ –ü–æ–ª—å—à–µ üáµüá±
      üì¢ –ü—Ä–∏–Ω–∏–º–∞–µ–º –≥—Ä–∞–∂–¥–∞–Ω –£–∫—Ä–∞–∏–Ω—ã üá∫üá¶, –ú–æ–ª–¥–æ–≤—ã üá≤üá© –∏ –ë–µ–ª–∞—Ä—É—Å–∏ üáßüáæ –¢–æ–ª—å–∫–æ –ú—É–∂—á–∏–Ω—ã –¥–æ 50 –ª–µ—Ç!

      üè† –ñ–∏–ª—å—ë: –º–µ—Å—Ç –Ω–∞ –∂–∏–ª—å—ë –Ω–µ—Ç ‚Äì —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–≤–æ—ë –∂–∏–ª—å—ë –≤ Kutno

      üí∞ –°—Ç–∞–≤–∫–∞ –∏ –∑–∞—Ä–ø–ª–∞—Ç–∞
      üí∞ 27,00 zl netto/—á–∞—Å
      (–î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ ‚Äì 35,00 zl netto/—á–∞—Å)
      [...]
    `
  },
  // –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –≤–∞–∫–∞–Ω—Å–∏–π –∑–¥–µ—Å—å
];

const App = () => {
  const [view, setView] = useState('intro');
  const [selectedCategory, setSelectedCategory] = useState(null);
  const [selectedJob, setSelectedJob] = useState(null);

  const filterJobs = (category) => {
    switch(category) {
      case 'all':
        return jobsData;
      case 'women':
        return jobsData.filter(job => job.forWomen);
      case 'cis':
        return jobsData.filter(job => job.forCIS);
      default:
        return [];
    }
  };

  return (
    <div className="min-h-screen bg-white">
      <AnimatePresence mode="wait">
        {view === 'intro' && (
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            className="flex flex-col items-center justify-center min-h-screen"
          >
            <motion.h1
              initial={{ scale: 0.5 }}
              animate={{ scale: 1 }}
              transition={{ duration: 0.5 }}
              className="text-4xl font-bold text-black mb-12"
            >
              Work Poland
            </motion.h1>
            <div className="flex flex-col gap-4 w-full max-w-md px-4">
              {[
                { title: '–í—Å–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏', category: 'all' },
                { title: '–¢–æ–ª—å–∫–æ –¥–ª—è –∂–µ–Ω—â–∏–Ω', category: 'women' },
                { title: '–î–ª—è –≥—Ä–∞–∂–¥–∞–Ω —Å—Ç—Ä–∞–Ω –°–ù–ì', category: 'cis' }
              ].map((button) => (
                <motion.button
                  key={button.category}
                  whileHover={{ scale: 1.02 }}
                  whileTap={{ scale: 0.98 }}
                  className="bg-gray-100 hover:bg-gray-200 text-black py-3 px-6 rounded-lg shadow-md"
                  onClick={() => {
                    setSelectedCategory(button.category);
                    setView('jobs');
                  }}
                >
                  {button.title}
                </motion.button>
              ))}
            </div>
          </motion.div>
        )}

        {view === 'jobs' && (
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: -20 }}
            className="p-4"
          >
            <div className="fixed top-4 right-4 z-10">
              <motion.button
                whileHover={{ scale: 1.1 }}
                whileTap={{ scale: 0.9 }}
                className="bg-gray-200 p-2 rounded-full"
                onClick={() => {
                  setView('intro');
                  setSelectedJob(null);
                }}
              >
                ‚Üê
              </motion.button>
            </div>

            <div className="mt-12 space-y-4">
              {filterJobs(selectedCategory).map((job) => (
                <motion.div
                  key={job.id}
                  layoutId={`job-${job.id}`}
                  className="bg-white rounded-lg shadow-md p-4"
                >
                  <h2 className="text-xl font-bold">{job.title}</h2>
                  <p className="text-gray-600">{job.salary}</p>
                  <p className="text-gray-600">{job.totalSalary}</p>
                  <p className="text-gray-600">{job.hours}</p>
                  <p className="text-gray-600 mb-4">{job.schedule}</p>
                  
                  {selectedJob?.id === job.id ? (
                    <>
                      <motion.div
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        className="mt-4"
                      >
                        <pre className="whitespace-pre-wrap text-sm">
                          {job.fullDescription}
                        </pre>
                        <div className="mt-4">
                          <a
                            href="https://t.me/your_username"
                            target="_blank"
                            rel="noopener noreferrer"
                            className="text-blue-500 hover:underline"
                          >
                            –°–≤—è–∑–∞—Ç—å—Å—è —Å —Ä–µ–∫—Ä—É—Ç–µ—Ä–æ–º
                          </a>
                        </div>
                      </motion.div>
                      <motion.button
                        whileHover={{ scale: 1.05 }}
                        whileTap={{ scale: 0.95 }}
                        className="mt-4 text-red-500"
                        onClick={() => setSelectedJob(null)}
                      >
                        –ó–∞–∫—Ä—ã—Ç—å
                      </motion.button>
                    </>
                  ) : (
                    <motion.button
                      whileHover={{ scale: 1.05 }}
                      whileTap={{ scale: 0.95 }}
                      className="bg-blue-500 text-white px-4 py-2 rounded"
                      onClick={() => setSelectedJob(job)}
                    >
                      –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </motion.button>
                  )}
                </motion.div>
              ))}
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
};

export default App;
